name: Deploy Cloudflare Worker Site

on:
  push:
    branches: ['main']
  workflow_dispatch:

jobs:
  Deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3 #Git Clone
    - uses: actions/setup-node@v3 #Node.jsç¯å¢ƒ
      with:
        node-version: '16.x' #Node.js 16.x
    - name: ğŸ”§ Timezone #UTC+0 â†’ UTC+8
      run: sudo timedatectl set-timezone 'Asia/Shanghai'
    - name: ğŸ“¦ï¸ YARN #å®‰è£…ä¾èµ–
      run: yarn install
    - name: ğŸš€ Deploy # éƒ¨ç½²
      env: #è®¾ç½®ç¯å¢ƒå˜é‡
        CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
      run: yarn deploy
